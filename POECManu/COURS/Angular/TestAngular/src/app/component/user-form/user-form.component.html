<div class="container" *ngFor="let user of users">
  <div class="background">
    <div class="card-header">
      {{ user.enterprise }}
      <div class="card">
        <div class="name">{{ user.prenom }} {{ user.nom }}</div>
        <div class="infos">
          <p>email : {{ user.email }}</p>
          <p *ngFor="let telephone of user.telephones">Tel : {{ telephone }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
<div>
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="nom"> Nom : </label>
      <input
        type="text"
        id="nom"
        formControlName="nom"
        placeholder="Entrez votre nom"
      />
      <span *ngIf="submitted && form['nom'].invalid">
        <span *ngIf="form['nom'].hasError('minlength')">
          Le nom doit contenir au moins 2 caractères
        </span>
        <span *ngIf="!form['nom'].value">Nom obligatoire !!!</span>
      </span>
    </div>
    <div>
      <label for="prenom"> Prénom : </label>
      <input
        type="text"
        id="prenom"
        formControlName="nom"
        placeholder="Entrez votre prénom"
      />
      <span *ngIf="submitted && form['prenom'].invalid">
        <span *ngIf="form['prenom'].hasError('minlength')">
          Le prénom doit contenir au moins 2 caractères
        </span>
        <span *ngIf="!form['prenom'].value">Prénom obligatoire !!!</span>
      </span>
    </div>
    <div>
      <label for="email"> Email : </label>
      <input
        type="email"
        id="email"
        formControlName="email"
        placeholder="Entrez votre email"
      />
      <span *ngIf="submitted && form['email'].invalid">
        <span *ngIf="form['email'].hasError('minlength')">
          L'email doit contenir au moins 2 caractères
        </span>
        <span *ngIf="!form['email'].value">Email obligatoire !!!</span>
      </span>
    </div>
    <div>
      <label for="entreprise"> Entreprise : </label>
      <input
        type="entreprise"
        id="entreprise"
        formControlName="entreprise"
        placeholder="Entrez votre entreprise"
      />
      <span *ngIf="submitted && form['entreprise'].invalid">
        <span *ngIf="form['entreprise'].hasError('minlength')">
          L'entreprise doit contenir au moins 2 caractères
        </span>
        <span *ngIf="!form['email'].value">Entreprise obligatoire !!!</span>
      </span>
    </div>
    <div formArrayName="telephones">
      <div *ngFor="let telephone of telephones.controls; let i = index">
        <label for="telephone">Téléphone : </label>
        <input
          type="tel"
          id="telephone"
          [formControlName]="i"
          placeholder="Entrez votre numéro"
        />
        <span *ngIf="submitted && telephone.invalid">
          <span *ngIf="telephone.hasError('minLength')">
            Le numéro de télephone doit contenir au moins 10 chiffres.
          </span>
          <span *ngIf="!telephone.value"> Téléphone obligatoire !! </span>
        </span>
      </div>
      <button type="button" (click)="addTelephone()">+</button>
      <button
        *ngIf="telephones.length > 1"
        type="button" (click)="removeTelephone()">-</button>
    </div>
    <button type="submit"> Envoyer </button>
  </form>
</div>
